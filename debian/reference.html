<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Codeville reference</title>
<link rel="stylesheet" href="/css/codevilleDark.css" type="text/css" media="screen">
</head>
<body>

<div class="navContainer">
<ul class="nav">
	<li id="first"><a href="/">Home</a></li>
	<li><a href="/#download">Download</a></li>
	<li><a href="/#news">News</a></li>
	<li><a href="/docs/">Docs</a></li>
	<li id="last"><a href="/docs/todo.php">Todo</a></li>
</ul>
</div>
<h1>Codeville commands</h1>

<pre>add &lt;files&gt;</pre>

<p class="command">Add new files to the repository.  All files must be added before they will be part of the version control system.</p>

<hr>
<pre>commit [-b] [-m &quot;&lt;comment&gt;&quot;] [-n]</pre>

<p class="command">Commits all changes made to the repository since the last commit.  A comment is required for every commit.  It may either be supplied via the -m option for simple comments or if the -m option is omitted, whatever editor is specified in the EDITOR environment variable will be launched.  If no editor is specified, vi is the default in all unixy environments (including OS X and cygwin) and Notepad is the default in Windows.  In the editor, a comment may be added at the top, and file changes which the user does not wish to have in a given changeset can be removed by deleting them from the &quot;### files&quot; list at the bottom (although merging cannot be avoided through deleting things from the &quot;### merge files&quot; list).  Every commit creates a changeset.  If there are changes since the last update, files will be merged.  In the event of unresolved conflicts, the user will be prompted to resolve them.</p>

<div class="opt">-n</div>
<div class="optdesc">is used to commit changes off-line.  Changes committed off-line can still be used with all commands, but are not visible to other users until an on-line commit is done.</div>

<div class="opt">-b</div>
<div class="optdesc">Forces commit to not make a new changeset.  This will commit changes which have already been committed locally via -n (or as a result of having multiple repositories involved), but will not create a new changeset for existing file modifications.  This is especially needed for committing to back-up servers (servers started with -b) as it is the only way to commit changes to a back-up server.  This is not the recommended way to commit changes to normal servers.  In general, if one wishes to commit changes committed offline without committing new changes, one should commit and changeset with all the files in the &quot;### files&quot; list removed.</div>

<hr>
<pre>construct &lt;changeset&gt;</pre>

<p class="command">Recreates the repository at the given changeset.</p>

<hr>
<pre>create &lt;repository name&gt;</pre>

<p class="command">Creates a new repository with the appropriate name.</p>

<hr>
<pre>describe [-x|-d] [-s] &lt;changeset&gt;</pre>

<p class="command">Gives the description of the changeset including the long name of the change, the user who made the change, that date it was made, the comment, the relation it has to other changesets, and what files were modified and in what manner they were modified (i.e. added, modified, renamed, or deleted).</p>
<div class="opt">-s</div>
<div class="optdesc">gives a short description</div>
<div class="opt">-d</div>
<div class="optdesc">does a diff</div>
<div class="opt">-x</div>
<div class="optdesc">displays an XML version of the output.  This is not compatible with displaying a diff.  This can only be used with parenthesized changesets from the file history.  It's sort of a hack right now, really.</div>

<hr>
<pre>destroy &lt;repository&gt;</pre>

<p class="command">Destroys a repository. The opposite of create.</p>

<hr>
<pre>diff [-r &lt;changeset&gt; [-r &lt;changeset&gt;] ] [&lt;files&gt;]</pre>

<p class="command">Does a diff between different versions of each of given files. If no files are specified, all relevant files are shown. The first -r option indicates which changeset the diff should be from, the second which it should be to.  If no changesets are specified, it shows the difference between the last known state of the repository and the current client state.</p>

<hr>
<pre>edit &lt;files&gt;</pre>

<p class="command">Enables editting a file.  When not in edit-mode, this is unnecessary.</p>

<hr>
<pre>heads</pre>

<p class="command">Lists the root nodes in the graph of changesets.</p>

<hr>
<pre>history [-h &lt;changeset&gt;] [-n &lt;number&gt;] [-s &lt;skip count&gt;] [-v] [&lt;files&gt;]</pre>

<p class="command">Gives the history of the repository or of the files specified.  Specifically, it lists all relevant change sets by short name, user, date, and comment in most recent first order.</p>

<div class="opt">-n</div>
<div class="optdesc">limits the number of changes printed to the given number</div>
<div class="opt">-h</div>
<div class="optdesc">causes it to print the history starting at the given changeset.</div>
<div class="opt">-s</div>
<div class="optdesc">skips the first &lt;skip count&gt; changes.</div>
<div class="opt">-v</div>
<div class="optdesc">causes it to print the changes verbosely which includes additional information about each changeset which affected the files.</div>

<hr>
<pre>is_ancestor &lt;changeset1&gt; &lt;changeset2&gt;</pre>

<p class="command">Tells whether or not &lt;changeset1&gt; is an ancestor of &lt;changeset2&gt;. Note that it is possible for neither changeset to be an ancestor of the other.</p>

<hr>
<pre>last-modified &lt;file&gt;</pre>

<p class="command">Returns the last changeset which modified a given file.</p>

<hr>
<pre>list-repos</pre>

<p class="command">Lists all the repositories on the same server as the repository you are in.</p>

<hr>
<pre>password</pre>

<p class="command">Change your password.</p>

<hr>
<pre>print_dag [-h &lt;changeset&gt;] [-h &lt;changeset&gt;] [...] &lt;file&gt;</pre>

<p class="command">Prints the directed acyclic graph which shows the changesets which have been applied to a file and their relationships.</p>
<p class="command">Changesets specified with -h are treated as head nodes for the graph (i.e. later changesets are excluded).</p>

<hr>
<pre>print_history [&lt;changeset&gt;]</pre>

<p class="command">Prints the directed acylcic graph of the the entire history. Starts at the given changeset, if provided.</p>

<hr>
<pre>rebuild</pre>

<p class="command">Recreates all of the metadata from the static history.  This should generally only be done when instructed to by software upgrade instructions.</p>

<hr>
<pre>remove &lt;files&gt;</pre>

<p class="command">Deletes files from the repository.</p>

<hr>
<pre>rename &lt;file&gt; &lt;newname&gt;</pre>

<p class="command">Moves or renames files.</p>

<hr>
<pre>revert [-a] &lt;files&gt;</pre>

<p class="command">Reverts any local changes to the file.  At this time only changes to the content of the file can be reverted.  The ability to revert adds, deletes, and renames will be coming in the future.</p>

<p class="command">There is a subtle difference in the definition of revert from what you might expect. It does not guarantee that it will restore the file to some previous state. For example, if you are in the middle of a merge and call revert on a file, it will be regenerated by running the merge. If the file were modified prior to running the merge update, the file contents will now be different from anytime in the past.</p>

<p class="command">Revert should be thought of as throwing away uncommitted changes.</p>

<div class="opt">-a</div>
<div class="optdesc">indicates files should only be reverted if they have not been modified. Basically unmarks them as open for edit.</div>

<hr>
<pre>set &lt;variable&gt; &lt;value&gt;</pre>

<p class="command">Sets a Codeville variable to a given value.</p>

<hr>
<pre>show-vars</pre>

<p class="command">Show a list of all Codeville variables and what they are set to.</p>

<hr>
<pre>status [-v]</pre>

<p class="command">Shows changes not yet committed to the repository in brief.</p>

<div class="opt">-v</div>
<div class="optdesc">A more verbose status which includes mention of files which are in the directory space, but not in the repository and files missing from the directory space.</div>

<hr>
<pre>unset &lt;variable&gt;</pre>

<p class="command">Removes a Codeville variable so that it no longer has any setting.</p>

<hr>
<pre>update [-d]</pre>

<p class="command">Gets all changes made to the repository since the last time you did an update.  Files will be merged as necessary.  In the event of unresolved conflicts, the user will be asked to resolve them.</p>

<div class="opt">-d</div>
<div class="optdesc">is broken in 0.1.9 and should not be used in this version.  In general, it pulls in changesets but does not merge them.  This allows a user to browse them and diff against them.  It will be functional in the next version.</div>

<h1>Specifying files:</h1>

<p>Files can be specified using bash-style wildcards on any platform. In addition, '...' behaves like a find command, expanding all files and directories within subdirectories.</p>

<h1>General notes:</h1>

<p>Flags are listed in no particular order.</p>

<p>All printed graphs are output in a format intended to be run through graphviz tools' &quot;dot&quot; tool.</p>

<p>Using tcsh as the startup shell under cygwin appears to result in the Python password command hanging, so it is incompatible with Codeville and there's not a thing we can do about it.</p>

<p>
&#8212; <a href="http://bitconjurer.org/">Bram</a> and <a href="mailto:rcohen@snurgle.removeme.org">Ross</a>
</p>

<div class="navContainer">
<ul class="nav">
	<li id="first"><a href="/">Home</a></li>
	<li><a href="/#download">Download</a></li>
	<li><a href="/#news">News</a></li>
	<li><a href="/docs/">Docs</a></li>
	<li id="last"><a href="/docs/todo.php">Todo</a></li>
</ul>
</div>
</body>
</html>

<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
        "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>Codeville - QuickStart</title>
<link rel="stylesheet" href="/css/codevilleDark.css" type="text/css" media="screen">
</head>
<body>

<div class="navContainer">
<ul class="nav">
	<li id="first"><a href="/">Home</a></li>
	<li><a href="/#download">Download</a></li>
	<li><a href="/#news">News</a></li>
	<li><a href="/docs/">Docs</a></li>
	<li id="last"><a href="/docs/todo.php">Todo</a></li>
</ul>
</div>
<h1>Codeville</h1>
<a id="toc" name="toc"></a>
<h2>Quickstart</h2>

<ul>
	<li><a href="#createClient">Creating A Client</a></li>
	<li><a href="#startServer">Starting A Server</a></li>
	<li><a href="#checkIn">Checking In/Out</a></li>
	<li><a href="#changes">Making and Reverting Changes</a></li>
	<li><a href="#branches">Branches</a></li>
	<li><a href="#other">Other Stuff</a></li>
</ul>

<a id="createClient" name="createClient"></a>
<h3>Creating a client <a href="#toc" class="toc">[Back to Top]</a></h3>

<p>
Create a working directory for your client. Within that directory create a directory called CVILLE. All client instructions below assume you are in the working directory or one of its subdirectories, not including the CVILLE dir. Run:
</p>

<pre>
cdv set user &lt;username&gt;
</pre>

<p>
<b>Note:</b> use of an email address as the username is recommended, but not required.
</p>

<p>
In order to perform operations on a server, your username must be in the password file for that server. You can create changesets without commiting them by using the -n flag to commit. If you don't need to work with others on the same codebase, this is a perfectly reasonable way to use the system. 
</p>

<p>To set a default repository, run the following:</p>

<pre>
cdv set repository &lt;URL&gt;
</pre>

<p>A repository URL has the following form:</p>
<pre>
cdv://&lt;server&gt;[:&lt;port&gt;]/&lt;repository&gt;
</pre>
<p>
The default repository may be changed at any time. You may override this setting for a single invocation like this: 
</p>

<pre>
cdv -r &lt;URL&gt; ...
</pre>

<a id="startServer" name="startServer"></a>
<h3>Starting a server <a href="#toc" class="toc">[Back to Top]</a></h3>

<p>
Choose a directory to start the server in. Change into the directory and create a file called codeville_repository. You will also need to create at least 1 account. Do this by running the <i>cdvpasswd</i> program in the server directory, for example: 
</p>

<pre>
cdvpasswd -f passwd add &lt;username&gt;
</pre>

<p>
<b>Note</b>: -f does not work in version 0.1.10 due to a command line parsing bug. Instead, you will have to create a cdvserver.conf file, which can be copied from /usr/share/doc/Codeville-0.1.10/cdvserver.conf.sample, or from the source distribution. Put the cdvserver.conf file into your server directory and change the "datadir" option inside to reflect the path to the server directory. Also comment out the "user" option. Then run cdvpasswd as follows:
</p>
<pre>
cdvpasswd -c &lt;config&gt; add &lt;username&gt;
</pre>

<p>
The special username "anonymous" is only allowed to do read operations on the repository. Then run the cdvserver program as follows:
</p>

<pre>
cdvserver -n -d -f &lt;server directory&gt;
</pre>

<p>
You now have a running server. Normally, the server will fork into the background and generally act more server-like. See the <a href="/docs/server.php">server reference</a> for more details.<br>
</p>

<a id="checkIn" name="checkIn"></a>
<h3>Creating an initial checkin <a href="#toc" class="toc">[Back to Top]</a></h3>

<p>
Once you have a client and server, you'll probably want to check stuff in. Codeville servers support multiple repositories. In order to create an empty one, do the following: 
</p>

<pre>
cdv create &lt;URL&gt;
</pre>

<p>
Port defaults to 6601 if not specified. Now populate the client directory with all the files you want to check in and run: 
</p>

<pre>
cdv add &lt;files&gt;
</pre>

<p>
To commit all of this to the server: 
</p>

<pre>
cdv commit [-n] [-m comment]
</pre>

<p>
Specifying -n will cause a changeset to be created but not sent to the server. Doing a later commit without the -n flag will send all changes created in this manner. This is useful for working offline.
</p>

<h3>Checking code out <a href="#toc" class="toc">[Back to Top]</a></h3>

<p>
Create a client and run: 
</p>

<pre>
cdv update
</pre>

<a id="changes" name="changes"></a>
<h3>Making changes <a href="#toc" class="toc">[Back to Top]</a></h3>

<p>
Codeville automatically detects when you have edited files in a client. You may rename and move files or directories with: 
</p>

<pre>
cdv rename &lt;source&gt; &lt;dest&gt;
</pre>

<p>
Delete files or directories with: 
</p>

<pre>
cdv remove &lt;files&gt;
</pre>

<p>
View your changes with: 
</p>

<pre>
cdv diff [-r &lt;changeset1&gt; [-r &lt;changeset2&gt;]]
</pre>

<p>
One -r flag will specify the change to diff from, a second the change to diff to. By default, the first change is the most recent change from the default repository (can be overridden with a top-level -r, see above) and the second is the current state of the checkout.<br>
This will show a shorter list of changes: 
</p>

<pre>
cdv status
</pre>

<p>
When you are happy with your changes, you can commit them as specified above.
</p>

<h3>Reverting changes <a href="#toc" class="toc">[Back to Top]</a></h3>
<p>
The local changes made to a file's contents can be discarded thusly:
</p>

<pre>
cdv revert &lt;file&gt;
</pre>

<p>
Only changes to a file's contents can be reverted at this time. Name operations (add, delete, rename) are not yet reversible.
</p>

<a id="branches" name="branches"></a>
<h3>Taking branches <a href="#toc" class="toc">[Back to Top]</a></h3>

<p>
Assuming your client is in the state at which you want to take the branch:
</p>
 

<pre>
cdv create &lt;URL2&gt;
cdv -r &lt;URL2&gt; commit
</pre>

<p>
There is no restriction on URL2 being on the same or different server from the first URL.
<p>


<h3>Merging branches <a href="#toc" class="toc">[Back to Top]</a></h3>

<p>
From a new client, you would do the following: 
</p>

<pre>
cdv update
cdv -r &lt;URL2&gt; update
(Resolve any name or merge conflicts)
cdv commit
</pre>

<p>
You may continue using branches after you have merged them. Codeville supports arbitrary branching, merging and remerging of any and all branches. 
</p>

<h3>Resolving conflicts <a href="#toc" class="toc">[Back to Top]</a></h3>

<p>
File conflicts are presented in a similar fashion to CVS. Conflicting sections of the file will be marked with &lt;&lt;&lt;&lt;&lt;&lt;&lt;, ======= and &gt;&gt;&gt;&gt;&gt;&gt;&gt;.<br>
Naming conflicts will result in mangled filenames. Look for files and directories which end with ".nameconflict.local", ".orphaned", ".loop", etc. Sometimes there will be a file with a ".info" extension which contains where the file exists according to the update which caused the problem. 
</p>

<a id="other" name="other"></a>
<h3>Other stuff <a href="#toc" class="toc">[Back to Top]</a></h3>

<p>
You can see a view of the history with: 
</p>

<pre>
cdv history
</pre>

<p>
This could use some explanation, but for now the change in parentheses is what brought this change into the repository. If you branch or merge, you may notice that many changes have the same one in parentheses.
</p>
<p>
Performance should be reasonable, there are still more optimizations to be done. For now, you will get better performance by updating after each commit.
</p>
<p>
All files are assumed to be text. That is, Codeville will attempt to merge them. Support for binaries and non-ascii encoded files will happen before 1.0.
</p>
<p>
At this point the repository format should be stable enough to say that there will always be an upgrade path for the servers, but I'm not making any promises.
</p>

<p>
&#8212; <a href="http://bitconjurer.org/">Bram</a> and <a href="mailto:rcohen@snurgle.removeme.org">Ross</a>
</p>

<div class="navContainer">
<ul class="nav">
	<li id="first"><a href="/">Home</a></li>
	<li><a href="/#download">Download</a></li>
	<li><a href="/#news">News</a></li>
	<li><a href="/docs/">Docs</a></li>
	<li id="last"><a href="/docs/todo.php">Todo</a></li>
</ul>
</div>
</body>
</html>
